# Keyboard settings
include "dot.mayu"

# mouse event activation
def option mouse-event = true

# Happy Hacking Keyboard (HHK) key definition {{{
def key LD = 0x7b
def key RD = 0x79
# }}}

keymap Global #{{{

  # control, capslock, windows, esc {{{
  #mod shift += !!!Space
  mod Control += CapsLock
  key *CapsLock = *LControl
  mod Control += E0CapsLock
  key *E0CapsLock = *LControl
  #key *LCtrl = $CapsLock
  key *NumLock = $CapsLock
  key *Apps = $CapsLock
  #key LWin =
  #key *LWin = $CapsLock
  key *RWin = $CapsLock

  # }}}

  # mouse {{{

  # use yammy's function
  # vim like moving with keys yuio (keys on the hjkl)
  key A-C-y = &MouseMove(-20, 0)
  key A-C-u = &MouseMove(0, 20)
  key A-C-i = &MouseMove(0, -20)
  key A-C-o = &MouseMove(20, 0)
  key CL-y = &MouseMove(-20, 0)
  key CL-u = &MouseMove(0, 20)
  key CL-i = &MouseMove(0, -20)
  key CL-o = &MouseMove(20, 0)
  key A-S-y = &WindowMove(-20, 0)
  key A-S-u = &WindowMove(0, 20)
  key A-S-i = &WindowMove(0, -20)
  key A-S-o = &WindowMove(20, 0)
  key CL-A-y = &WindowMove(-20, 0)
  key CL-A-u = &WindowMove(0, 20)
  key CL-A-i = &WindowMove(0, -20)
  key CL-A-o = &WindowMove(20, 0)

  # click
  key A-C-n = LButton
  key A-C-p = RButton
  key CL-*A-n = LButton
  key CL-*A-p = RButton
  key CL-*A-Semicolon = RButton

  # mouse wheel
  key A-C-m = &MouseWheel(-520)
  key A-C-comma = &MouseWheel(520)
  key CL-m = &MouseWheel(-520)
  key CL-comma = &MouseWheel(520)
  key A-S-m = &MouseWheel(-120)
  key A-S-comma = &MouseWheel(120)
  # }}}
 
  # vim like arrow {{{
  key A-C-h = Left
  key A-C-j = Down
  key A-C-k = Up
  key A-C-l = Right
  key CL-*C-*A-h = Left
  key CL-*C-*A-j = Down
  key CL-*C-*A-k = Up
  key CL-*C-*A-l = Right
  # }}}
 
  # other basic settings {{{
  key C-h = BS                  # Always BS with C-h
  key A-C-a = A-Space n         # Minimize window
  key A-_4 = A-F4               # Close window
  #key A-*C-e = Esc              # A-e to ESC
  #key C-S-e = Esc               # C-S-e to ESC
  key C-LeftSquareBracket = Esc # Always C-[ to ESC, like vim
  key A-d = Delete              # Always Delete with A-d
  #key C-o = A-Left              # Go to previous page
  #key C-i = A-Right             # Go to nexe page
  key A-C-f = LWIN              # Push Start button, can start search directly
  key C-Space = A-GraveAccent   # Unix like IME

  # For HHK
  # ESC to ` like normal keyboard (ESC is placed on the left of 1 in HHK)
  #key Esc = GraveAccent
  #key S-Esc = S-GraveAccent
  key A-Esc = A-GraveAccent     # IME
  key A-_1 = A-GraveAccent      # IME
  key A-Space = A-GraveAccent   # IME

  key A-C-BS = W-l              # Go to login window, for HHK (no Win key)
  key A-_0 = W-l                # Go to login window, for HHK (no Win key)

  # Left Meta key to Alt (at SW5=Off)
  mod alt += LD
  key *LD = *LAlt

  # Right Meta key to Win key
  mod Windows += RD
  key *RD = *RWindows
  # }}}

  # Volume {{{
  # Volume 0
  #key C-F3 = &Repeat((VolumeDown), 20)
  # Volume Max
  #key C-F4 = &Repeat((VolumeUp), 20)
  # }}}

# }}}

# Vim mode {{{
keymap Vim : Global

  # Lock Keys
  # L0: Normal mode
  # L1: Character-wise Visual mode
  # L2: Line-wise Visual mode
  # L3: Line copy state
  # L4: Command line mode

  # toggles for insert/normal modes {{{

  # Enter vim normal mode
  key Esc = &Toggle(Lock0,on)
  key C-LeftSquareBracket =  &Toggle(Lock0,on)

  # Enter vim insert mode (Exit vim normal mode)
  key L0-i = &Toggle(Lock0,off)
  key L0-S-i = Home &Toggle(Lock0,off)
  key L0-a = Right &Toggle(Lock0,off)
  key L0-S-a = End &Toggle(Lock0,off)
  key L0-o = End Enter &Toggle(Lock0,off)
  key L0-O = Up End Enter &Toggle(Lock0,off)
  # }}} toggles

  # Undo/Redo {{{
  key L0-u = C-z
  key L0-C-r = C-y
  # }}}

  # Move {{{
  key L0-*C-h = Left
  key L0-*C-j = Down
  key L0-*C-k = Up
  key L0-*C-l = Right
  key L0-*C-_0 = Home
  key L0-*C-_4 = End
  key L0-*C-a = Home # emacs like
  key L0-*C-e = End  # emacs like

  key L0-w = C-Right
  key L0-b = C-Left

  key L0-C-u = &Repeat((Up), 10)
  key L0-C-d = &Repeat((Down), 10)
  key L0-C-b = &Repeat((Up), 20)
  key L0-C-f = &Repeat((Down), 20)

keymap2 VimUpDown
  key L0-g = C-Home # gg

keymap Vim : Global
  key L0-g = &Prefix(VimUpDown)
  key L0-S-g = C-End # G
  # }}}

  # Copy/Cut/Paste {{{
keymap2 VimCopy
  key L0-y = Home S-End C-c Esc &Toggle(Lock3,on) # yy
  key L0-S-_4 = S-End C-c Esc &Toggle(Lock3,off) # y$
  key L0-_0 = S-Home C-c Esc &Toggle(Lock3,off) # y0
  key L0-w = S-C-Right C-c Esc &Toggle(Lock3,off) # yw
  key L0-b = S-C-Left C-c Esc &Toggle(Lock3,off) # yb
  key L0-S-G = S-C-End C-c Esc &Toggle(Lock3,off) # yG

keymap Vim : Global
  key L0-y = &Prefix(VimCopy)
  key L0-S-y = Home S-End C-c Esc &Toggle(Lock3,on) # Y

keymap2 VimCut
  key L0-d = Home S-End C-x Delete &Toggle(Lock3,on) # dd
  key L0-S-_4 = S-End C-x &Toggle(Lock3,off) # d$
  key L0-_0 = S-Home C-x &Toggle(Lock3,off) # d0
  key L0-w = S-C-Right C-x &Toggle(Lock3,off) # dw
  key L0-b = S-C-Left C-x &Toggle(Lock3,off) # db
  key L0-S-g = S-C-End C-x &Toggle(Lock3,off) # dG

keymap Vim : Global
  key L0-d = &Prefix(VimCut)
  key L0-S-d = S-End C-x &Toggle(Lock3,off) # D

keymap2 VimChange
  key L0-S-_4 = S-End C-x &Toggle(Lock0,off) # c$
  key L0-_0 = S-Home C-x &Toggle(Lock0,off) # c0
  key L0-w = S-C-Right C-x &Toggle(Lock0,off) # cw
  key L0-b = S-C-Left C-x &Toggle(Lock0,off) # cb
  key L0-S-g = S-C-End C-x &Toggle(Lock0,off) # cG

keymap Vim : Global
  key L0-c = &Prefix(VimChange)
  key L0-S-c = S-End C-x &Toggle(Lock0,off) # C

  #key L0-x = S-Right C-x &Toggle(Lock3,off)
  key L0-x = Delete

  key L0-p = Right C-v &Toggle(Lock3,off)
  key L0-S-p = C-v &Toggle(Lock3,off)
  key L3-L0-p = End Enter C-v Home &Toggle(Lock3,off)
  key L3-L0-S-p = Up End Enter C-v Home &Toggle(Lock3,off)
  # }}}

  # Vim visual mode {{{
  # Characterwise-visual
  key L0-v = &Toggle(Lock1,on) &Toggle(Lock0,off)

  key L1-h = S-Left
  key L1-j = S-Down
  key L1-k = S-Up
  key L1-l = S-Right
  key L1-_0 = S-Home
  key L1-_4 = S-End
  key L1-w = S-C-Right
  key L1-b = S-C-Left

  key L1-C-u = &Repeat((S-Up), 10)
  key L1-C-d = &Repeat((S-Down), 10)
  key L1-C-b = &Repeat((S-Up), 20)
  key L1-C-f = &Repeat((S-Down), 20)

  key L1-y = C-c &Toggle(Lock1,off) &Toggle(Lock0,on) &Toggle(Lock3,off)
  key L1-d = C-x &Toggle(Lock1,off) &Toggle(Lock0,on) &Toggle(Lock3,off)
  key L1-x = C-x &Toggle(Lock1,off) &Toggle(Lock0,on) &Toggle(Lock3,off)
  key L1-c = C-x &Toggle(Lock1,off) &Toggle(Lock0,off) &Toggle(Lock3,off)

  key L1-Esc = &Toggle(Lock1,off) &Toggle(Lock0,on)
  key L1-C-LeftSquareBracket =  &Toggle(Lock1,off) &Toggle(Lock0,on)

  # Linewise-visual
  key L0-S-v = Home S-End &Toggle(Lock2,on) &Toggle(Lock0,off)

  key L2-j = S-Home S-Down S-End
  key L2-k = S-Home S-Up S-End

  key L2-y = C-c &Toggle(Lock2,off) &Toggle(Lock0,on) &Toggle(Lock3,on)
  key L2-d = C-x &Toggle(Lock2,off) &Toggle(Lock0,on) &Toggle(Lock3,on)
  key L2-x = C-x &Toggle(Lock2,off) &Toggle(Lock0,on) &Toggle(Lock3,on)
  key L2-c = C-x &Toggle(Lock2,off) &Toggle(Lock0,off) &Toggle(Lock3,on)

  key L2-Esc = &Toggle(Lock2,off) &Toggle(Lock0,on)
  key L2-C-LeftSquareBracket =  &Toggle(Lock2,off) &Toggle(Lock0,on)
  # }}}

  # Search {{{
  key L0-Slash = C-f &Toggle(Lock0,off)
  key L0-n = F3
  key L0-S-n = S-F3
window Search ( /検索/ || /検索/) : Vim
  key L0-n = A-d A-f
  key L0-S-n = A-u A-f
  key L0-i = A-n &Toggle(Lock0,off)
  key Enter = &Toggle(Lock0,on) A-f A-F4
  key L0-Enter = A-f A-F4
  key L0-Esc = A-F4 &Toggle(Lock0,on)
  key L0-C-LeftSquareBracket = A-F4 &Toggle(Lock0,on)

keymap Vim : Global
  # }}}

  # Command line mode {{{
  key L0-S-Semicolon = &Toggle(Lock4,on) &Toggle(Lock0,off)
  key L4-w = A-f A-a # Save as
  #key L4-w = C-s # Save
  key L4-q = A-F4
  # }}}

#}}} Vim mode

# For explorer {{{
window powerpnt /Explorer.EXE*/ : Global
 key C-o = A-Left
 key C-i = A-Right
# }}}

# For powerpoint {{{
window powerpnt /POWERPNT.EXE*/ : Global
 # key C-Space = Right S-Left C-Space
 key C-Space = Right S-Left
 key C-Equal = C-t b Enter
 key C-S-Equal = C-t p Enter
 key C-S-s = C-t f s y m b o l Enter
 key C-S-a = C-t f a r i a l Enter
 key C-S-h = C-t f h e l v e t i c a Enter
# }}}

# For word {{{
window winword /WINWORD.EXE*/ : Global
 key C-Equal = C-d b Enter
 key C-S-Equal = C-d p Enter
# }}}

# For edit control {{{
window EditControl /:Edit$ : Global
 key C-h = BS
# }}}

# For magic formation {{{
window MagicFormation /MagicFormation*/ : Global
 key CL-h = Left
 key CL-j = Down
 key CL-k = Up
 key CL-l = Right
# }}}

# For firefox + thunderbird {{{
window Mozilla /MozillaWindowClass$/ : Global
 #For mozilla with CL
 key *CL-d = d
# }}}

# For thunderbird {{{
window Tunderbird ( /thunderbird/ && /作成/ ): Vim
# Vim mode in ThunderBird
  key L0-n = C-G
  key L0-S-n = C-S-G
#window TunderbirdSearch ( /thunderbird/ && /検索/ ) : Vim
#  key L0-n = A-f
# }}}

# For note pad {{{
# C:\Windows\system32\notepad.exe:Notepad:Edit
window Notepad /:Notepad:Edit$/ : Vim
# use Vim mode in Note pad
#}}}

# For synergy {{{
window synergy /Synergy/ : Global
 key A-Esc = A-GraveAccent
 key A-C-h = Left
 key A-C-j = Down
 key A-C-k = Up
 key A-C-l = Right
# }}}

# For input director {{{
window inputdirector /InputDirector/ : Global
 key A-Esc = A-GraveAccent
 key A-C-h = Left
 key A-C-j = Down
 key A-C-k = Up
 key A-C-l = Right
# }}}

# For Gvim {{{
#	C:\Program Files\vim\gvim.exe:Vim:VimTextArea
window Vim /:Vim:VimTextArea$/ : Global
  key A-v = $QUOTATION_MARK $PLUS_SIGN g S-p
# }}}

# For Cygwin {{{
window Cygwin /cygwin/ : Global
  key A-v = RButton # Paste
  key IL-Esc = A-GraveAccent Esc # Make IME off, Exit insert mode
  key IC-Esc = Esc A-GraveAccent Esc # Stop convert, Make IME off, Exit insert mode
  key IL-C-LeftSquareBracket = A-GraveAccent Esc # Make IME off, Exit insert mode
  key IC-C-LeftSquareBracket = Esc A-GraveAccent Esc # Stop convert, Make IME off, Exit insert mode
# }}}

# For PuTTY {{{
window PuTTY /putty/ : Global
  key A-v = RButton
# }}}

 

# local
##window size
#key C-A-Enter = &WindowMoveTo(NW,5,10) &WindowResizeTo(1360,880)
#key C-A-S-Enter = &WindowMoveTo(NW,5,10) &WindowResizeTo(1000,680)
#key A-S-h = &WindowMoveTo(NW,5,10) &WindowResizeTo(680,880)
#key A-S-l = &WindowMoveTo(NW,685,10) &WindowResizeTo(680,880)
#key A-S-k = &WindowMoveTo(NW,5,10) &WindowResizeTo(1350,440)
#key A-S-j = &WindowMoveTo(NW,5,450) &WindowResizeTo(1350,440)
include ".local.mayu"
